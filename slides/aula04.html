<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Aula 04</title>

    <!-- Revealjs styles -->
    <link rel="stylesheet" href="../revealjs/dist/reset.css">
    <link rel="stylesheet" href="../revealjs/dist/reveal.css">
    <link rel="stylesheet" href="../revealjs/dist/theme/serif.css" id="theme">
    <link rel="stylesheet" href="../revealjs/plugin/highlight/monokai.css" id="highlight-theme">

    <link rel="stylesheet" href="../asciinema/asciinema-player.css">

    <link rel="stylesheet" href="python-repl/python-repl.css">

    <!-- Fonts -->
    <link rel='stylesheet' href='fonts/definitions.css'>

    <!-- Local styles -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/ace-brython-customization.css">
    <link rel="stylesheet" href="css/python-repl-customization.css">
    <link rel="stylesheet" href="css/highlightjs-customization.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown>
            # Python 101
            ## Aula 04
        </section>


        <section>
          <h3>La√ßos</h3>
          <p>...continua√ß√£o</p>
        </section>



        <section data-auto-animate>
          <p>Nosso primeiro la√ßo</p>
          <p style='font-size: .8em'>Fun√ß√£o respons√°vel por somar os primeiros
          <code>n</code> n√∫meros naturais:</p>

          <div class='ace-brython' style='font-size: .5em; height: 14em;'>
            <script type='text/x.ace-brython' data-id='first-loop-while'>
              def soma_n(n):
                  i = 0
                  soma = 0

                  while i < n:
                      soma += i
                      i += 1

                  return soma


              print(soma_n(10))
              print(soma_n(4))
            </script>
          </div>

          <div class='fragment local-standout-box'><code>while</code> √© uma das
            duas estruturas de repeti√ß√£o de Python. A outra √© <code>for</code>.
          </div>
        </section>



        <section data-auto-animate>
          <p>Nosso primeiro la√ßo</p>
          <p style='font-size: .8em'>O mesmo programa utilizando
          <code>for</code>:</p>

          <div class='fragment'>
            <div
              class='ace-brython'
              style='font-size: .5em; height: 14em;'
              data-prev='first-loop-while'
              >
              <script type='text/x.ace-brython'>
                def soma_n(n):
                    soma = 0
                    for i in range(0, n):
                      soma += i

                    return soma


                print(soma_n(10))
                print(soma_n(4))
              </script>
            </div>

            <div style='font-size: .8em; text-align: left;'>
              <ul>
                <li>
                  A chamada de fun√ß√£o <code>range(0, n)</code> retorna um
                  <strong>iter√°vel</strong> que produz n√∫meros de
                  <span class='math-font'>0</span> a
                  <span class='math-font'>n - 1</span>
                </li>
                <li>
                  Valores do tipo <strong>iter√°vel</strong> representam objetos
                  que permitem ser usados com a instru√ß√£o <code>for</code>,
                  iterando sobre seus itens
                </li>
              </ul>
            </div>
            <div class='fragment local-standout-box' style='bottom: 1.5em;'>
              Exemplos de objetos iter√°veis s√£o as cole√ß√µes, que veremos mais
              adiante.
            </div>
          </div>
        </section>



        <section data-auto-animate>
          <p class='fragment fade-in-then-semi-out'>Por que temos duas
          estruturas diferentes para la√ßos?</p>

          <p class='fragment'><code>for</code> √© bem conveniente quanto estamos
          utilizando cole√ß√µes e/ou j√° se sabe de antem√£o a quantidade de
          repeti√ß√µes</p>


          <p class='fragment'><code>while</code> acaba sendo necess√°rio quando
          n√£o se sabe quantas vezes o bloco de instru√ß√µes deve ser repetido</p>
        </section>



        <section data-auto-animate>
          <p>
            Exemplo: vamos implementar um jogo onde o usu√°rio precisa descobrir
            um n√∫mero que est√° entre 1 e 100.
          </p>
          <br/>
          <p class='fragment'>
            Estrat√©gia: repetidamente ler um palpite do usu√°rio at√© ele
            acertar.
          </p>
          <div class='fragment local-standout-box'>
            Neste caso, n√£o tem como saber quantas vezes vamos repetir, ent√£o
            precisaremos utilizar a estrutura <code>while</code>!
          </div>
        </section>


        <section data-auto-animate>
          <p>Nossa solu√ß√£o:</p>
          <div class='ace-brython' data-components='code'>
            <script type='text/x.ace-brython'>
              import random

              numero_secreto = random.randint(1, 100)
              palpite = int(input('Qual seu palpite? '))

              while palpite != numero_secreto:
                  if palpite > numero_secreto:
                    print('N√∫mero secreto √© menor que o palpite')
                  else:
                    print('N√∫mero secreto √© maior que o palpite')

                  palpite = int(input('Qual seu novo palpite? '))

              print('Parab√©ns, voc√™ acertou!')
            </script>
          </div>
          <div class='local-standout-box fragment' style='bottom: 1em; font-size: .9em;'>
            Desafio: voc√™ conseguiria implementar o contr√°rio: um programa que
            tenta descobrir um n√∫mero selecionado pelo usu√°rio com poucos
            palpites?
          </div>
        </section>



        <section data-auto-animate>
          <h4>Instru√ß√£o <code>break</code></h4>
        </section>


        <section data-auto-animate>
          <h4>Instru√ß√£o <code>break</code></h4>
          <p>
            Muitas vezes √© comum querermos sair imediatamente de um
            la√ßo caso alguma condi√ß√£o seja satisfeita, ignorando o
            restante das linhas presentes no bloco.
          </p>
        </section>



        <section data-auto-animate>
          <h4>Instru√ß√£o <code>break</code></h4>
          <p>
            Muitas vezes √© comum querermos sair imediatamente de um
            la√ßo caso alguma condi√ß√£o seja satisfeita, ignorando o
            restante das linhas presentes no bloco.
          </p>
          <p>
            Chamamos isto de <strong>quebrar</strong> o la√ßo e utilizamos a
            instru√ß√£o <code>break</code> para faz√™-lo.
          </p>
        </section>



        <section data-auto-animate>
          <h4>Instru√ß√£o <code>break</code></h4>
          <p>
            Um exemplo de quebrando um <code>while</code>:
            <br/>
            <em>Um programa papagaio</em>: programa que repete cada entrada do
            usu√°rio at√© que o mesmo diga "tchau".
          </p>

          <div class='ace-brython fragment' data-components='code'
               style='font-size: .6em; flex: 1;'
          >
            <script type='text/x.ace-brython'>
              print('Conversa com papagaio')

              while True:
                frase = input('Usu√°rio: ')

                if frase == 'tchau':
                  break
                  print('Esta linha de c√≥digo nunca ser√° executada!')

                print('Papagaio:', frase)

              print('Fim')
            </script>
          </div>
        </section>



        <section data-auto-animate>
          <h4>Instru√ß√£o <code>continue</code></h4>
          <p>
            Assim como o <code>break</code>, a instru√ß√£o <code>continue</code>
            tamb√©m p√°ra a execu√ß√£o do bloco.
          </p>
        </section>



        <section data-auto-animate>
          <h4>Instru√ß√£o <code>continue</code></h4>
          <p>
            Assim como o <code>break</code>, a instru√ß√£o <code>continue</code>
            tamb√©m p√°ra a execu√ß√£o do bloco.
          </p>
          <p>
            Por√©m, em vez de sair do la√ßo, a instru√ß√£o move o fluxo do programa
            para a <strong>pr√≥xima itera√ß√£o</strong>.
          </p>
        </section>



        <section data-auto-animate>
          <h4>Instru√ß√£o <code>continue</code></h4>
          <p style='font-size: .8em;'>
            Exemplo com um <code>while</code>: Um programa para pedir a senha
            do usu√°rio at√© ele acertar.
          </p>
          <div class='ace-brython fragment' data-components='code'
               style='font-size: .5em; flex: 1;'
          >
            <script type='text/x.ace-brython'>
              # Exemplo de que s√≥ executa o bloco inteiro quando a senha n√£o
              # est√° vazia e est√° correta
              print('Digite seu nome')
              nome = input()
              print('Ol√°,' + nome + '!')

              while True:
                  senha = input('Por favor, digite a senha: ')

                  if not senha:
                    print('Senha vazia')
                    continue

                  if senha != '1234':
                    print('Senha incorreta!')
                    continue

                  break

              print('Senha correta, login efetuado com sucesso!')
              print('At√© a pr√≥xima!')
            </script>
          </div>
        </section>



        <section data-auto-animate>
          <p style='font-size: .8em;'>Note que <code>break</code> e
          <code>continue</code> tamb√©m podem ser utilizados em la√ßos do tipo
          <code>for</code>.</p>

          <p class='fragment'>Exemplo: permitir no m√°ximo 5 tentativas de
          login.</p>

          <div class='ace-brython fragment' data-components='code'
               style='font-size: .6em;'
          >
            <script type='text/x.ace-brython'>
              sucesso = False
              # Pedir senha no m√°ximo 5 vezes
              for i in range(5):
                  senha = input('Digite a senha: ')
                  if senha == '1234':
                    sucesso = True
                    break

              if sucesso:
                  print('Login realizado com sucesso')
              else:
                  print('Login bloqueado')

            </script>
          </div>
        </section>



        <section data-auto-animate>
          <p style='font-size: .8em;'>Note que <code>break</code> e
          <code>continue</code> tamb√©m podem ser utilizados em la√ßos do tipo
          <code>for</code>.</p>

          <p class='fragment'>
            Exemplo: realizar soma de apenas n√∫meros √≠mpares.
          </p>

          <div class='ace-brython fragment' data-components='code'
               style='font-size: .6em;'
          >
            <script type='text/x.ace-brython'>
              # Exemplo de c√≥digo que ignora os valores √≠mpares
              soma = 0
              for i in range(0, 10):
                if i % 2 == 0:
                  continue
                soma += i
              print(soma)
            </script>
          </div>
        </section>



        <section data-auto-animate>
          <h4>Usando <code>else</code> em la√ßos</h4>
        </section>



        <section data-auto-animate>
          <h4>Usando <code>else</code> em la√ßos</h4>

          <p>
            Python permite definir um bloco para ser executado quando o la√ßo √©
            finalizado "<em>normalmente</em>":
          </p>

          <ul>
            <li>
              <code>while</code>: quando o la√ßo p√°ra por causa da condi√ß√£o
            </li>
            <li>
              <code>for</code>: quando o la√ßo p√°ra por ter consumido todos os
              items do iter√°vel
            </li>
          </ul>

          <p class='local-standout-box fragment' style='bottom: 2em;'>
            Em outras palavras: quando o la√ßo <strong>n√£o √© interrompido por um
            <code>break</code></strong>  üôÇ
          </p>
        </section>


        <section data-auto-animate>
          <h4>Usando <code>else</code> em la√ßos</h4>

          <p style='font-size: .9em;'>
            Isso √© feito adicionando <code>else:</code> seguido de um bloco:
          </p>

          <div class='ace-brython' data-readonly data-components='code'>
            <script type='text/x.ace-brython'>
              while condicao:
                  ...
              else:
                  ...
            </script>
          </div>
          <br/>
          <div class='ace-brython' data-readonly data-components='code'>
            <script type='text/x.ace-brython'>
              for i in iteravel:
                  ...
              else:
                  ...
            </script>
          </div>
        </section>



        <section data-auto-animate>
          <h4>Usando <code>else</code> em la√ßos</h4>

          <p>Exemplo: modificar o exemplo de permitir no m√°ximo 5 tentativas de
          login.</p>

          <div class='ace-brython fragment' data-components='code'
               style='font-size: .6em;'
          >
            <script type='text/x.ace-brython'>
              # Pedir senha no m√°ximo 5 vezes
              for i in range(5):
                  senha = input('Digite a senha: ')
                  if senha == '1234':
                    print('Login realizado com sucesso')
                    break
              else:
                  print('Login bloqueado')
            </script>
          </div>
          <br/>
          <div class='fragment' style='font-size: .8em; text-align: left;'>
            Pr√≥s:<br/>
            <ul style='margin-top: .2ex;'>
              <li>Vari√°vel <code>sucesso</code> n√£o mais necess√°ria!</li>
              <li>C√≥digo mais simples</li>
            </ul>
          </div>
        </section>



        <section>
          <h3>Tratamento de erros</h3>
        </section>



        <section data-auto-animate>
          <h4>Tratamento de erros</h4>

          <p>O que acontecer√° ao executarmos o seguinte c√≥digo?</p>

          <div class='ace-brython fragment'>
            <script type='text/x.ace-brython'>
              a = int('treze')
            </script>
          </div>
        </section>



        <section data-auto-animate>
          <h4>Tratamento de erros</h4>

          <p class='fragment fade-in-then-semi-out'>
            O c√≥digo anterior causou Python a lan√ßar uma
            <strong>exce√ß√£o</strong>!
          </p>

          <p class='fragment fade-in-then-semi-out'>
            <strong>Exce√ß√µes</strong> s√£o objetos utilizados por Python para
            representar erros.
          </p>

          <p class='fragment'>
            Se elas n√£o s√£o capturadas pelo nosso c√≥digo, Python
            <strong>aborta</strong> a execu√ß√£o do resto do programa.
          </p>
        </section>



        <section data-auto-animate>
          <p style='font-size: .9em;'>
            Como capturar exce√ß√µes?
          </p>

          <p class='fragment'>
            Atrav√©s da instru√ß√£o <code>try</code>:
          </p>

          <div class='fragment ace-brython' style='font-size: .6em;'>
              <script type='text/x.ace-brython'>
                def quadrado(n):
                    try:
                        n = int(n)
                    except:
                        print('N√∫mero inv√°lido:', n)


                quadrado('treze')
                quadrado(13)
              </script>
          </div>
        </section>



        <section data-auto-animate>
          <p style='font-size: .9em;'>
            Podemos utilizar a cl√°usula <code>else</code> para adicionar c√≥digo
            a ser executado apenas se o bloco definido por <code>try</code> for
            executado com sucesso:
          </p>

          <div class='fragment ace-brython' style='font-size: .6em;'>
              <script type='text/x.ace-brython'>
                def quadrado(n):
                    try:
                        n = int(n)
                    except:
                        print('N√∫mero inv√°lido:', n)
                    else:
                        print(n, 'ao quadrado √©', n**2)


                quadrado('treze')
                quadrado(13)
              </script>
          </div>
        </section>



        <section data-auto-animate>
          <p style='font-size: .9em;'>
            Podemos utilizar a cl√°usula <code>finally</code> para adicionar
            c√≥digo a ser executado em ambos os casos (erro ou n√£o erro):
          </p>

          <div class='fragment ace-brython' style='font-size: .6em;'>
              <script type='text/x.ace-brython'>
                def quadrado(n):
                    try:
                        n = int(n)
                    except:
                        print('N√∫mero inv√°lido:', n)
                    else:
                        print(n, 'ao quadrado √©', n**2)
                    finally:
                        print('Tchau!')


                quadrado('treze')
                quadrado(13)
              </script>
          </div>
        </section>



        <section data-auto-animate>
          <p style='font-size: .8em; margin-bottom: 0;'>
            H√° diversos tipos de erros:
          </p>

          <ul style='font-size: .8em; margin-top: 0;'>
            <li class='fragment'>
              <code>ValueError</code>: Ocorre quando um valor utilizado em uma
              opera√ß√£o √© inv√°lido. Esse tipo de exce√ß√£o √© lan√ßada pela fun√ß√£o
              <code>int()</code>, por exemplo.
            </li>

            <li class='fragment'>
              <code>TypeError</code>: Ocorre quando um valor utilizado em uma
              opera√ß√£o n√£o √© de um tipo esperado. Esse tipo de exce√ß√£o √©
              lan√ßada quando tentamos executar <code>1 + 'a'</code>, por
              exemplo.
            </li>

            <li class='fragment'>
              <code>ZeroDivisionError</code>: Ocorre quando tentamos dividir um
              n√∫mero por zero.
            </li>

            <li class='fragment'>
              E <strong>muitos</strong> outros. A lista de exce√ß√µes
              pr√©-definidas de Python pode ser vista em
              <a
                href='https://docs.python.org/3/library/exceptions.html#bltin-exceptions'
                target='_blank'>
                https://docs.python.org/3/library/exceptions.html#bltin-exceptions
              </a>.
            </li>
          </ul>
        </section>



        <section data-auto-animate>
          <p style='font-size: .8em;'>
            √â sempre boa pr√°tica definirmos o tipo de exce√ß√£o que queremos
            capturar.
          </p>

          <p class='fragment' style='font-size: .8em;'>
            Fazemos isso passando o tipo na cl√°usula <code>except</code>:
          </p>

          <div class='fragment ace-brython' style='font-size: .6em;'>
              <script type='text/x.ace-brython'>
                def quadrado(n):
                    try:
                        n = int(n)
                    except ValueError:
                        print('N√∫mero inv√°lido:', n)
                    else:
                        print(n, 'ao quadrado √©', n**2)
                    finally:
                        print('Tchau!')


                quadrado('treze')
                quadrado(13)
              </script>
          </div>
        </section>



        <section data-auto-animate>
          <p style='font-size: .8em;'>
            √â poss√≠vel capturar mais de um tipo de exce√ß√£o:
          </p>

          <div class='fragment ace-brython' data-components='code' style='font-size: .6em;'>
              <script type='text/x.ace-brython'>
                def potencia(base, expoente):
                    try:
                        base = float(base)
                        expoente = float(expoente)
                        resultado = base ** expoente
                    except ValueError:
                        print('Algum dos argumentos n√£o √© um n√∫mero v√°lido')
                    except OverflowError:
                        print('O resultado √© muito grande')
                    else:
                        print(base, 'elevado a', expoente, '√©', resultado)


                potencia('tr√™s', '3')
                potencia('3', '3')
                potencia('2.4', '1000')
              </script>
          </div>
        </section>


        <section data-auto-animate>
          <h4>Tratamento de erros</h4>

          <p>
            Tratamento de erros √© uma parte bem importante do seu c√≥digo!
          </p>
          <p>
            Um c√≥digo de qualidade sempre realiza tratamento de erros quando
            apropriado.
          </p>
        </section>



        <section data-auto-animate>
          <h4>Tratamento de erros</h4>

          <p>
            Exemplo: valida√ß√£o de valores de entrada do programa.
          </p>

          <div class='fragment ace-brython' data-components='code' style='font-size: .6em;'>
              <script type='text/x.ace-brython'>
                while True:
                    n = input('Valor de n: ')

                    try:
                        n = int(n)
                    except ValueError:
                        print('n deve ser um n√∫mero inteiro')
                    else:
                        break

                soma = sum(range(n))
                print('a soma de 0 at√©', n - 1, '√©', soma)
              </script>
          </div>
        </section>


        <section>
            <div class='r-fit-text'>
                At√© a pr√≥xima!
            </div>
        </section>
      </div>
    </div>

    <script src="../revealjs/dist/reveal.js"></script>
    <script src="../revealjs/plugin/notes/notes.js"></script>
    <script src="../revealjs/plugin/markdown/markdown.js"></script>
    <script src="../revealjs/plugin/highlight/highlight.js"></script>
    <script src="../revealjs-ace-brython/dist/main.js"></script>
    <script src="../asciinema/asciinema-player.js"></script>
    <script type='module' src="main.js"></script>
  </body>
</html>
